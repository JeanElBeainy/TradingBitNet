window.onload = function() {
    
    const canvas = document.getElementById("financial-icons");
    const g = canvas.getContext("2d");
    
    let W = window.innerWidth;
    let H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;

    const iconImagePaths = [

        //Bitcoin
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M18.763 10.236c.28-1.895-1.155-2.905-3.131-3.591l.64-2.553-1.56-.389-.623 2.49-1.245-.297.631-2.508L11.915 3l-.641 2.562-.992-.234v-.01l-2.157-.54-.415 1.668s1.155.272 1.137.28c.631.163.74.578.722.903l-.722 2.923.162.054-.171-.036-1.02 4.087c-.072.19-.27.478-.712.36.018.028-1.128-.27-1.128-.27l-.776 1.778 2.03.505 1.11.289-.65 2.59 1.56.387.632-2.562 1.254.324-.64 2.554 1.56.388.641-2.59c2.662.505 4.665.308 5.505-2.102.676-1.94-.037-3.05-1.435-3.79 1.02-.225 1.786-.902 1.985-2.282zm-3.564 4.999c-.479 1.94-3.745.884-4.8.63l.857-3.436c1.055.27 4.448.784 3.943 2.796zm.478-5.026c-.433 1.76-3.158.866-4.033.65l.775-3.113c.885.217 3.718.632 3.258 2.463"/></svg>'),
        
        //XRP
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M18.36 4.125h2.605l-5.42 5.781A4.92 4.92 0 0 1 12 11.443a4.9 4.9 0 0 1-3.546-1.537L3.026 4.125H5.64l4.112 4.429c1.204 1.277 3.291 1.277 4.496 0zM5.604 19.865H3l5.453-5.763a4.93 4.93 0 0 1 3.55-1.537 4.92 4.92 0 0 1 3.552 1.538L21 19.875h-2.605l-4.138-4.411c-1.205-1.277-3.291-1.277-4.496 0z"/></svg>'),
        
        //Ethereum
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M12 3v6.65l5.625 2.516zm0 0-5.625 9.166L12 9.651zm0 13.477v4.522l5.625-7.784zM12 21v-4.523l-5.625-3.262z"/><path fill="#fff" d="m12 15.43 5.625-3.263L12 9.65zm-5.625-3.263L12 15.429V9.651z"/><path fill="#fff" fill-rule="evenodd" d="m12 15.429-5.625-3.263L12 3l5.625 9.166zM6.749 11.9l5.161-8.41v6.115zm-.077.23 5.238-2.327v5.364zm5.418-2.327v5.364l5.233-3.038zm0-.198 5.16 2.295-5.16-8.41z" clip-rule="evenodd"/><path fill="#fff" fill-rule="evenodd" d="M12 16.406 6.375 13.21 12 21l5.625-7.79zm-4.995-2.633 4.905 2.79v4.005zm5.085 2.79v4.005l4.905-6.795z" clip-rule="evenodd"/></svg>'),
        
        //Solana
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M18.413 7.901a.62.62 0 0 1-.411.164H3.58c-.512 0-.77-.585-.416-.928l2.368-2.284a.6.6 0 0 1 .41-.169h14.479c.517 0 .77.59.41.934zm0 11.257a.6.6 0 0 1-.411.158H3.58c-.512 0-.77-.58-.416-.923l2.368-2.289a.6.6 0 0 1 .41-.163h14.479c.517 0 .77.585.41.928zm0-8.685a.6.6 0 0 0-.411-.157H3.58c-.512 0-.77.58-.416.922l2.368 2.29a.62.62 0 0 0 .41.163h14.479c.517 0 .77-.585.41-.928z"/></svg>'),
        
        //Litecoin
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="m5.734 15.611-1.609.63.776-3.116 1.62-.652L8.86 3h5.772l-1.71 6.975 1.586-.642-.765 3.083-1.598.653-.956 4.074h8.685L18.895 21H4.406z"/></svg>'),
        
        //apple
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>'),
    
        //google
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#fff" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#fff" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#fff" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>'),

        //Microsoft
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect fill="#fff" x="2" y="2" width="9" height="9" rx="1"/><rect fill="#fff" x="13" y="2" width="9" height="9" rx="1"/><rect fill="#fff" x="2" y="13" width="9" height="9" rx="1"/><rect fill="#fff" x="13" y="13" width="9" height="9" rx="1"/></svg>'),
        
        //Twitter (X)
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>'),

        //Meta
        'data:image/svg+xml;utf8,' + encodeURIComponent('<svg width="266" height="176" viewBox="0 0 266 176" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M256.322 60.8585C253.115 52.0782 249.133 43.5174 243.935 35.2858C238.792 27.1092 232.266 19.2069 223.86 12.6217C215.51 6.09133 204.56 1.15241 192.947 0.219507L188.633 0C187.14 0.0548769 185.481 0.0548767 183.933 0.219507C180.78 0.548769 177.794 1.26217 174.974 2.08532C169.278 3.84138 164.301 6.47547 159.932 9.32907C152.079 14.4875 145.83 20.4691 140.189 26.6153C140.244 26.725 140.355 26.7799 140.41 26.8897L141.627 28.4262C144.447 32.103 150.586 40.554 156.061 49.6636C162.863 43.0783 171.711 35.1212 175.361 32.8164C178.126 31.1152 180.836 29.7981 183.269 29.0847C184.541 28.7555 185.702 28.4811 186.808 28.4262C187.361 28.3165 187.859 28.3713 188.467 28.3165L190.569 28.4262C195.988 28.9201 201.297 31.1152 206.33 34.9566C216.339 42.8588 224.247 56.3037 229.39 70.5168C234.644 84.7848 237.63 100.37 237.796 115.406C237.796 122.595 236.856 129.509 234.644 135.217C232.487 140.979 227.012 143.174 220.819 143.174C211.805 143.174 205.279 139.332 200.025 133.954C194.274 127.973 188.854 121.278 183.656 114.144C179.343 108.162 175.14 101.961 171.158 95.6504C164.135 84.3458 154.733 70.0229 148.208 58.0597L133 35.2858C131.286 33.1456 129.627 31.0054 127.802 28.8652C121.663 21.9508 114.861 15.146 106.068 9.32907C101.699 6.47547 96.7222 3.84138 91.0262 2.08532C88.2058 1.26217 85.2195 0.548769 82.0674 0.219507C81.0719 0.109754 80.0765 0.0548781 79.0811 0.0548781C78.4728 0.0548781 77.9198 0 77.3667 0L73.0532 0.219507C61.4399 1.15241 50.4902 6.09133 42.1397 12.6217C33.7339 19.2069 27.2083 27.1092 22.0653 35.2858C16.8669 43.5174 12.8852 52.0782 9.67775 60.8585C3.42869 78.4191 0.0553015 96.5833 0 115.351C0.0553015 125.119 1.32723 135.271 5.30894 145.369C9.18004 155.247 16.4798 165.728 28.0931 171.545C33.7892 174.454 40.2595 175.99 46.4532 175.99C53.2553 176.155 59.7256 174.234 64.8686 171.765C75.21 166.661 82.3439 159.911 88.8141 153.106C101.589 139.332 111.045 124.406 119.783 109.205C122.216 105.034 124.539 100.754 126.806 96.4187C125.645 94.1687 124.484 91.809 123.267 89.3396C119.838 83.6872 115.58 76.9923 112.483 72.3277C107.893 80.5593 103.137 88.5713 98.2154 96.5284C89.4224 110.357 79.9659 123.802 69.4033 134.832C64.1497 140.21 58.343 144.93 53.2553 147.18C50.6561 148.277 48.6653 148.661 46.9509 148.552C44.573 148.552 42.5821 148.003 40.7019 147.015C36.9967 145.094 33.5127 140.979 31.3559 135.217C29.1439 129.509 28.2037 122.595 28.2037 115.406C28.3696 100.37 31.3559 84.7848 36.6096 70.5168C41.7526 56.3037 49.6607 42.8588 59.6703 34.9566C64.7027 31.1152 70.0116 28.9201 75.4312 28.4262L77.5326 28.3165C78.141 28.3713 78.6387 28.3165 79.1917 28.4262C80.2977 28.4811 81.459 28.7555 82.731 29.0847C84.1688 29.5238 85.7173 30.1274 87.321 30.9506C88.427 31.4993 89.5331 32.103 90.6391 32.8164C96.1692 36.3285 101.644 41.4869 106.787 47.1941C110.769 51.6391 114.585 56.5781 118.4 61.6267L133 84.0714C137.148 92.5773 141.461 101.028 146.217 109.205C154.955 124.406 164.411 139.332 177.186 153.106C180.946 157.112 184.983 161.064 189.739 164.631C193.113 167.265 196.818 169.624 201.131 171.765C206.274 174.234 212.745 176.155 219.547 175.99C225.741 175.99 232.211 174.454 237.907 171.545C249.52 165.728 256.82 155.247 260.691 145.369C264.673 135.271 265.945 125.119 266 115.351C265.945 96.5833 262.571 78.4191 256.322 60.8585Z" fill="#B7B7B7"/></svg>'),

    ];

    const iconImages = [];
    let iconsLoaded = 0;
    const baseDensity = 0.00002; // Adjust this value to get more or fewer icons
    let numIcons = Math.floor((W * H) * baseDensity);
    
    const minIcons = 18; 
    numIcons = Math.max(numIcons, minIcons);
    
    iconImagePaths.forEach(path => {
        const img = new Image();
        img.src = path;
        img.onload = () => {
            iconsLoaded++;
            if (iconsLoaded === iconImagePaths.length) {
                initializeParticles();
                setInterval(draw, 30);
            }
        };
        iconImages.push(img);
    });
    let particles = [];
    
    function Particle() {
        this.x = Math.random() * W;
        this.y = Math.random() * H;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
        this.size = 20 + Math.random() * 25;
        this.img = iconImages[Math.floor(Math.random() * iconImages.length)];
    }

    function initializeParticles() {
        if (iconImages.length > 0)
            for(let i = 0; i < numIcons; i++)
                particles.push(new Particle());
    }

    function draw() {
        g.fillStyle = '#141414ff';
        g.fillRect(0, 0, W, H);
        g.globalAlpha = 0.4; 

        for(let j = 0; j < particles.length; j++) {
            const p = particles[j];
            
            g.drawImage(p.img, p.x, p.y, p.size, p.size);
            p.x += p.vx;
            p.y += p.vy;
            
            if(p.x < -p.size) p.x = W;
            if(p.y < -p.size) p.y = H;
            if(p.x > W) p.x = -p.size;
            if(p.y > H) p.y = -p.size;
        }
        g.globalAlpha = 1; 
    }

    window.addEventListener('resize', () => {
        W = window.innerWidth;
        H = window.innerHeight;
        canvas.width = W;
        canvas.height = H;
    });
};